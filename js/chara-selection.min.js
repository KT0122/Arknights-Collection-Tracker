let version="v.1.0.0",selected_count=0,chara_rarity_count=[0,0,0,0,0,0];function CreateCharaDiv(a,t,e,c){let r="";switch(e){case"Caster":r="caster.png";break;case"Defender":r="defender.png";break;case"Guard":r="guard.png";break;case"Medic":r="medic.png";break;case"Sniper":r="sniper.png";break;case"Specialist":r="specialist.png";break;case"Supporter":r="supporter.png";break;case"Vanguard":r="vanguard.png"}return`\n        <div class="col-lg-2 col-md-3 col-4 text-center">            \n            <button class="chara-img-btn" data-selected="false" data-rarity=${c}>\n                <div class="chara-img-box">\n                    <img class="chara-img disable-drag" src="${location.pathname}../img/ak/avatars/${t}.png" loading="lazy" width="128" height="128" alt="${a}">\n                    <img class="chara-img-class disable-drag" src="${location.pathname}../img/ak/classes/${r}">                \n                </div>\n            </button>\n        </div>\n    `}function SetCharaDiv(){$.getJSON(`${location.pathname}chara-db.json`,function(a){a.chara.forEach(a=>{$(".chara-selection-"+a.rarity).append(CreateCharaDiv(a.name,a.image,a.class,a.rarity))})}).then(function(){$(".chara-img-btn").click(function(){let a=$(this).data("selected"),t=$(this).data("rarity");!1===a?($(this).css("background","white"),$(this).data("selected",!0),selected_count++,chara_rarity_count[t-1]++,$("#rarity-"+t).html(chara_rarity_count[t-1]),$("#selected").html(selected_count)):($(this).css("background","rgba(0,0,0,0)"),$(this).data("selected",!1),selected_count--,chara_rarity_count[t-1]--,$("#rarity-"+t).html(chara_rarity_count[t-1]),$("#selected").html(selected_count))})})}$(document).ready(function(){$(".version").append(version),$("#selected").html(selected_count),SetCharaDiv(),$("img").on("dragstart",function(a){a.preventDefault()}),$("#ign-input").keyup(function(){$("#ign").text("IGN : "+$(this).val())}),$("#reset").click(function(){selected_count=0,$("#selected").html(selected_count),chara_rarity_count=[0,0,0,0,0,0];for(let a=1;a<=chara_rarity_count.length;a++)$("#rarity-"+a).html(0);$("#rarity-"+$(this).data("rarity")).html(0),$(".chara-img-btn").each(function(){$(this).css("background","rgba(0,0,0,0)"),$(this).data("selected",!1)})}),$("#download").click(function(){var a=document.createElement("a");a.href=$("canvas")[0].toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream"),a.download="ak-collection-generator.jpg",a.click()}),$("#generate").click(function(){$("#generate").css("display","none"),$(".chara-img-btn").each(function(){!1===$(this).data("selected")?$(this).parent().css("display","none"):$(this).css("background","rgba(0,0,0,0)")});let a=[];chara_rarity_count.forEach((t,e)=>{t<=0&&$(".chara-selection-"+(e+1)).css("display","none"),a.push(e)}),$("html, body").animate({scrollTop:$("body").offset().top},0),html2canvas(document.querySelector("#capture-area"),{backgroundColor:"#1b262c",width:window.innerWidth}).then(t=>{let e=t.toDataURL("image/jpeg").replace("image/jpeg","image/octet-stream");$("#result-img").attr("src",e),$("#result-a").attr("href",e),""!==$("#ign-input").val()?$("#result-a").attr("download",`ak-collection-tracker-${$("#ign-input").val()}.jpg`):$("#result-a").attr("download","ak-collection-tracker.jpg"),$("#generate").css("display","initial"),$(".capture-result").css("display","initial"),$(".chara-img-btn").each(function(){!1===$(this).data("selected")?$(this).parent().css("display","initial"):$(this).css("background","white")}),a.forEach(a=>{$(".chara-selection-"+a).css("display","flex")}),$("html, body").animate({scrollTop:$("div.capture-result").offset().top},1e3)})})});